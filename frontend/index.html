<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–¥–∞—á, –∑–∞–º–µ—Ç–æ–∫" />
    <link rel="stylesheet" href="./style.css" />
    <title>Note App</title>
</head>
<body>
    <div class="app-container">
        <header class="app-header">
            <h1>–ú–æ–∏ –∑–∞–¥–∞—á–∏</h1>
            <div class="connection-status" id="connectionStatus">
                üîÑ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É...
            </div>
        </header>
        
        <div class="create-section">
            <div id="taskFormSection" class="form-container">
                <h2>–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –∑–∞–¥–∞—á—É</h2>
                <div class="form-row">
                    <div class="form-group">
                        <label for="title">–ó–∞–≥–æ–ª–æ–≤–æ–∫:</label>
                        <input
                            type="text"
                            id="taskTitleInput"
                            placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏"
                            required
                        />
                    </div>
                    <div class="form-group">
                        <label for="priority">–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:</label>
                        <select id="taskPrioritySelect">
                            <option value="low">–ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</option>
                            <option value="medium">–°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</option>
                            <option value="high">–í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="description">–û–ø–∏—Å–∞–Ω–∏–µ:</label>
                    <textarea
                        id="taskDescriptionInput"
                        rows="3"
                        placeholder="–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ...."
                    ></textarea>
                </div>
                <div class="form-group">
                    <label for="dueDate">–°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:</label>
                    <input type="date" id="dueDate" />
                </div>

                <div class="labels-input">
                    <label>–ú–µ—Ç–∫–∏ –∑–∞–¥–∞—á–∏:</label>
                    <div class="form-row">
                        <input
                            type="text"
                            id="newLabelInput"
                            placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –º–µ—Ç–∫–∏"
                            style="flex: 2"
                        />
                        <input type="color" id="labelColorInput" value="#a790f9" />
                        <button
                            type="button"
                            onclick="addLabelToTask()"
                            class="btn btn-secondary"
                            style="flex: 1"
                        >
                            –î–æ–±–∞–≤–∏—Ç—å
                        </button>
                    </div>

                    <div id="labelsPreview" class="labels-preview"></div>
                    <div class="quick-labels-title" style="margin-top: 10px">
                        –ë—ã—Å—Ç—Ä—ã–µ –º–µ—Ç–∫–∏:
                    </div>
                    <div class="available-tags" style="margin-top: 10px">
                        <span
                            class="tag-option"
                            style="background: #a790f9"
                            onclick="addLabel('–£—á–µ–±–∞', '#a790f9')"
                            >–£—á–µ–±–∞</span
                        >
                        <span
                            class="tag-option"
                            style="background: #de95eb"
                            onclick="addLabel('–†–∞–±–æ—Ç–∞', '#de95eb')"
                            >–†–∞–±–æ—Ç–∞</span
                        >
                        <span
                            class="tag-option"
                            style="background: #fcfc86"
                            onclick="addLabel('–°—Ä–æ—á–Ω–æ', '#fcfc86')"
                            >–°—Ä–æ—á–Ω–æ</span
                        >
                        <span
                            class="tag-option"
                            style="background: #b5b0fa"
                            onclick="addLabel('–ü—Ä–æ–µ–∫—Ç', '#b5b0fa')"
                            >–ü—Ä–æ–µ–∫—Ç</span
                        >
                        <span
                            class="tag-option"
                            style="background: #a0f699"
                            onclick="addLabel('–û—Ç–¥—ã—Ö', '#a0f699')"
                            >–û—Ç–¥—ã—Ö</span
                        >
                        <span
                            class="tag-option"
                            style="background: #b9f9ed"
                            onclick="addLabel('–°–ø–æ—Ä—Ç', '#b9f9ed')"
                            >–°–ø–æ—Ä—Ç</span
                        >
                        <span
                            class="tag-option"
                            style="background: #fdea7a"
                            onclick="addLabel('–î–æ–º', '#fdea7a')"
                            >–î–æ–º</span
                        >
                        <span
                            class="tag-option"
                            style="background: #edafc5"
                            onclick="addLabel('–õ–∏—á–Ω–æ–µ', '#edafc5')"
                            >–õ–∏—á–Ω–æ–µ</span
                        >
                    </div>
                </div>
                <button
                    onclick="createTask()"
                    class="btn btn-primary"
                    style="margin-top: 20px"
                >
                    –°–æ–∑–¥–∞—Ç—å –∑–∞–¥–∞—á—É
                </button>
            </div>
        </div>

        <div class="data-section">
            <div class="filters">
                <input type="text" id="search" placeholder="–ü–æ–∏—Å–∫ –∑–∞–¥–∞—á..." onkeyup="filterTasks()" />
                <select id="filterPriority" onchange="filterTasks()">
                    <option value="all">–í—Å–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã</option>
                    <option value="low">–ù–∏–∑–∫–∏–π</option>
                    <option value="medium">–°—Ä–µ–¥–Ω–∏–π</option>
                    <option value="high">–í—ã—Å–æ–∫–∏–π</option>
                </select>
                <select id="filterStatus" onchange="filterTasks()">
                    <option value="all">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>
                    <option value="todo">–ö –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—é</option>
                    <option value="in_progress">–í –ø—Ä–æ—Ü–µ—Å—Å–µ</option>
                    <option value="done">–í—ã–ø–æ–ª–Ω–µ–Ω–æ</option>
                </select>
                <button class="clearFilters" onclick="clearFilters()">–°–±—Ä–æ—Å–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã</button>
            </div>

            <div id="tasksListSection" class="data-container">
                <h2>–ê–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–¥–∞—á–∏</h2>
                <div id="tasksContainer">
                    <div class="empty-state">–ó–∞–≥—Ä—É–∑–∫–∞ –∑–∞–¥–∞—á...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <div id="editModal" class="modal">
        <div class="modal-content">
            <h3 id="modalTitle">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏</h3>
            <div id="modalBody">
                <!-- –§–æ—Ä–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±—É–¥–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ -->
            </div>
            <div style="margin-top: 25px; display: flex; gap: 15px">
                <button onclick="closeModal()" class="btn btn-secondary">
                    –û—Ç–º–µ–Ω–∞
                </button>
                <button onclick="saveEdit()" class="btn btn-primary">
                    –°–æ—Ö—Ä–∞–Ω–∏—Ç—å
                </button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è -->
    <div id="deleteModal" class="modal">
        <div class="modal-content">
            <h3>–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —É–¥–∞–ª–µ–Ω–∏—è</h3>
            <p>–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É –∑–∞–¥–∞—á—É?</p>
            <div style="margin-top: 25px; display: flex; gap: 15px">
                <button onclick="closeModal()" class="btn btn-secondary">
                    –û—Ç–º–µ–Ω–∞
                </button>
                <button onclick="confirmDelete()" class="btn btn-danger">
                    –£–¥–∞–ª–∏—Ç—å
                </button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            checkServerConnection();
            loadTasks();
        });
    </script>
</body>
</html>
